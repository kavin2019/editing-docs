## ADD 更高级的复制命令

格式：

```shell
ADD --chown=<user>:<group> <源路径> [<源路径>...] <目标路径>
ADD [<源路径>[,<源路径>...],<目标路径>]
```

ADD和COPY的基本性质是一样的。但是在COPY的基础了增加了功能：

* 复制网络资源
  如果`<源路径>`是一个URL时，docker引擎会自动下载这个链接的文件放到`<目标路径>`下。下载后的文件权限为600，如果修改需要增加额外一层使用RUN，如果下载的是压缩包，也需要额外一层RUN进行解压缩。所以不如直接使用RUN指令调用wget或curl工具下载，处理权限、解压缩、然后清理无用文件。这样更合理，因此这个功能不实用，不推荐。
* 复制压缩文件
  如果`<源路径>`是一个压缩包，压缩格式为gzip，bzip2以及xz的情况下，ADD将会自动解压缩并将解压缩后的文件放到`<目标路径>`下。所以如果需要拷贝一个压缩包时需要使用COPY命令。
* 复制普通文件
  当源路径文件是普通文件时，ADD命令效果和COPY是一样的。

> 需要注意的是，`ADD` 指令会令镜像构建缓存失效，从而可能会令镜像构建变得比较缓慢。
>
> 因此在 `COPY` 和 `ADD` 指令中选择的时候，可以遵循这样的原则，所有的文件复制均使用 `COPY` 指令，仅在需要自动解压缩的场合使用 `ADD`

复制时可以改变用户和用户组：

```shell
ADD --root:root file* /mydir/
```

