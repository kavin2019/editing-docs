# 用户相关的命令

## 相关文件

| 文件 | 说明 |
| --- | --- |
| `/etc/login.defs` | 用户的默认设置（创建用户时默认的元数据，如账户有效期，过期时间等 |
| `/etc/passwd` | 用户文件 |
| `/etc/shadown` | 用户隐私（密码）文件 |
| `/etc/default/useradd ` | 创建用户相关配置 |
| `/etc/skel/*` | 用户在创建时，系统会自动将下面的的文件拷贝到家目录 |
| `/etc/group` | 用户组 |
| `/etc/gshadow | 用户组密码 |


## 查看用户信息
### 查看用户登录信息
```shell
$ cat /etc/passwd
｜用户名|x(原来用于密码)|uid|gid|描述|办公室｜电话|shell|
```
如果想第二行仍旧显示密码
```shell
$ pwunconv
# 关闭
$ pwconv
```
PS:类似命令`pwconv, pwunconv, grpconv, grpunconv - 在影子密码和组以及其它直接转换`
详情请使用`man 5 passwd`

### 查看用户隐私信息
```shell
$ cat /etc/shadow
```
```
|用户名｜密码(加密)|用户密码修改日期（0表示下次登录需要修改）|最小密码使用天数|密码过期天数|密码提示过期天数|密码过期后还能使用多久|账号可以存在多少天数|预留字段|
```
用户密码字段组成：$加密类型$盐(salt)$加密密码
详情请使用`man 5 shadow`
如果想修改加密算法参考`man authconfig`

## 修改用户信息
命令:`chfn` - `change your finger information`
```shell
$ chfn [-f full-name] [-o office] ,RB [ -p office-phone] [-h home-phone] -u] [-v] [username]
```

## 修改用户密码

### 强制用户密码失效
用户下次登录后，立即进行密码修改
方法一:
```shell
$ passwd -e <username>
```
方法2:
```shell
$ chage -d 0 username
```

## 修改用户shell
命令: `chsh` - `change your login shell`
```shell
$ chsh [-s shell] [-l] [-u] [-v] [username]
```
```text
 -s, --shell shell
      Specify your login shell.
-l, --list-shells
      Print the list of shells listed in /etc/shells and exit.
-u, --help
      Print a usage message and exit.
-v, --version
    Print version information and exit.
```
